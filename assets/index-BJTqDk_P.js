var j=Object.defineProperty;var A=(e,t,i)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var h=(e,t,i)=>(A(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();const S=document.getElementById("canvas");class p{constructor(t,i){this.x=t,this.y=i}}class g{constructor(t,i,n,s,o){this.position=t,this.width=i,this.height=n,this.ctx=s,this.image=new Image,this.image.src=o}draw(){console.log("platform draw called"),this.ctx.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}update(t){this.position.y>t&&(this.position.x=Math.floor(Math.random()*S.width*3/4),this.position.y=-this.height)}}const E=document.getElementById("canvas");class k{constructor(t,i,n,s,o,c,m,u){h(this,"position");h(this,"width");h(this,"height");h(this,"Rightimgsrc");h(this,"leftimgsrc");h(this,"ctx");h(this,"image");h(this,"vx");h(this,"vy");h(this,"gravity");h(this,"jumpspeed");this.position=t,this.width=i,this.height=n,this.Rightimgsrc=s,this.leftimgsrc=o,this.ctx=c,this.image=new Image,this.image.src=this.Rightimgsrc,this.vx=0,this.vy=0,this.gravity=m,this.jumpspeed=u,this.addEvent()}update(){this.position.x+=this.vx,this.vy+=this.gravity,this.position.y+=this.vy,this.position.x>E.width?this.position.x=0:this.position.x+this.width<0&&(this.position.x=E.width-10),this.vy>15&&(this.vy=15)}addEvent(){document.addEventListener("keydown",t=>{t.code=="ArrowRight"||t.key=="d"?this.moveX(4,this.Rightimgsrc):(t.code=="ArrowLeft"||t.key=="a")&&this.moveX(-4,this.leftimgsrc)}),document.addEventListener("keyup",t=>{(t.code=="ArrowRight"||t.code=="ArrowLeft"||t.key=="d"||t.key=="a")&&(this.vx=0)})}draw(){this.ctx.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}reset(t){this.position=t,this.vx=0,this.vy=0,this.image.src=this.Rightimgsrc}moveX(t,i){this.vx=t,this.image.src=i}jump(){this.vy=this.jumpspeed}}function X(e,t){return e.position.x<t.position.x+t.width&&e.position.x+e.width>t.position.x&&e.position.y<t.position.y+t.height&&e.position.y+e.height>t.position.y}window.onload=()=>{const e=document.getElementById("canvas"),t=e.getContext("2d"),i=360,n=540,s=18,o=60;let c=!1,m=0;const u=-12,I=.4;e.width=i,e.height=n;let v=new Image;v.src="./doodlejumpbg.png";function L(){t.drawImage(v,0,0,e.width,e.height)}function M(){t.fillStyle="red",t.font="48px sans-serif",t.fillText("Game Over",i/2-120,n/2),t.font="24px sans-serif",t.fillText("Press Space to Restart",i/2-110,n/2+50)}let a=[];function x(){a=[];for(let r=0;r<6;r++){let l=Math.floor(Math.random()*(i-o)),f=n-75*r-150;if(r>0){let w=a[r-1].position.y-100;f=Math.max(f,w)}let y=new g(new p(l,f),o,s,t,"./platform.png");a.push(y)}}function R(){let r=Math.floor(Math.random()*(i-o)),f=Math.min(...a.map(w=>w.position.y))-Math.random()*50-50,y=new g(new p(r,f),o,s,t,"./platform.png");a.push(y)}function O(){c=!1,m=0,d.reset(new p(i/2-23,n*7/8-46)),x(),a.push(new g(new p(i/2-o/2,n-50),o,s,t,"./platform.png"))}let d=new k(new p(i/2-23,n*7/8-46),46,46,"./doodler-right.png","./doodler-left.png",t,I,u);x(),a.push(new g(new p(i/2-o/2,n-50),o,s,t,"./platform.png"));function P(){if(t.clearRect(0,0,e.width,e.height),L(),c)M();else{if(d.update(),d.vy<0&&d.position.y<n/2){let r=-d.vy;a.forEach(l=>{l.position.y+=r}),d.position.y+=r}for(let r=a.length-1;r>=0;r--){let l=a[r];l.draw(),X(l,d)&&d.vy>=0&&d.jump(),l.position.y>n&&(a.splice(r,1),R(),m++)}d.draw(),d.position.y>n&&(c=!0)}t.fillStyle="blue",t.font="16px sans-serif",t.fillText(`Score: ${m}`,5,20),requestAnimationFrame(P)}P(),document.addEventListener("keydown",r=>{r.key===" "&&c&&O()})};
